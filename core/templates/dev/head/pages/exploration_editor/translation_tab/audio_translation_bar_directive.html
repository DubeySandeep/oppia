<div class="oppia-audio-recording-bar" ng-show="!isAudioAvailable && !selectedRecording">
  <div class="oppia-audio-button oppia-disabled-icon" type="button">
    <i class="material-icons">&#xE039;</i>
  </div>
  <div class="oppia-audio-bar-info">
    <div ng-if="!recordingPermissionDenied && !unsupportedBrowser">
      No audio Available. Press <i class="material-icons">mic</i>  to start recording.
    </div>
    <div ng-if="recordingPermissionDenied">
      You need to grant permission for this application to USE your microphone.
    </div>
    <div ng-if="unsupportedBrowser">
      Sorry, your browser does not support recording feature.
    </div>
  </div>
  <div class="oppia-audio-button" type="button"
       uib-tooltip="Record" tooltip-placement="bottom"
       ng-click="checkAndStartRecording()"
       ng-class="{'oppia-disabled-icon': !canTranslate || recordingPermissionDenied || unsupportedBrowser}">
    <i class="material-icons">mic</i>
  </div>
  <div class="oppia-audio-button" type="button"
       uib-tooltip="Upload" tooltip-placement="bottom"
       ng-click="openAddAudioTranslationModal()"
       ng-class="{'oppia-disabled-icon': !canTranslate}">
    <i class="material-icons">add_circle_outline</i>
  </div>
</div>

<div class="oppia-audio-recording-bar" ng-show="selectedRecording || isUpdatingAudio">
  <ng-audio-recorder id="<[RECORDER_ID]>" audio-model="audioBlob" time-limit="recordingTimeLimit">
    <div class="oppia-recording-button"
         ng-click="recorder.status.isPlaying ? recorder.playbackPause() : recorder.playbackResume()">
      <i class="material-icons" ng-class="{'oppia-disabled-icon': recorder.status.isRecording || !recorder.audioModel}">
        {{recorder.status.isStopped || recorder.status.isPaused ? '&#xE039;' : '&#xE035;'}}
      </i>
    </div>
    <div class="oppia-audio-visulaizer">
      <div class="oppia-mp3-converting" ng-if="recorder.status.isConverting">
        Converting to mp3<loading-dots></loading-dots>
      </div>
      <canvas-sizer id="analyser" >
        <div class="oppia-recoding-analyzer" ng-show="recorder.isHtml5 && recorder.status.isRecording">
          <ng-audio-recorder-analyzer height="110" wave-color="black" ></ng-audio-recorder-analyzer>
        </div>

        <div class="oppia-audio-wave-view" ng-show="!recorder.status.isRecording && recorder.audioModel" >
          <ng-audio-recorder-wave-view   height="50"></ng-audio-recorder-wave-view>
        </div>
      </canvas-sizer>
    </div>

    <div class="oppia-recording-button" ng-if="recorder.status.isRecording">
      {{(recorder.timeLimit - recorder.elapsedTime) | formatTimer}}
    </div>
    <div class="oppia-recording-button" type="button"
         uib-tooltip="Stop" tooltip-placement="bottom"
         ng-if="recorder.status.isRecording"
         ng-click="recorder.stopRecord()">
      <i class="material-icons">stop</i>
    </div>
  </ng-audio-recorder>
  <div class="oppia-audio-button" type="button"
       ng-if="!recorder.status.isRecording && audioBlob"
       ng-click="reRecord()">
    <i class="material-icons">loop</i>
  </div>
  <div class="oppia-audio-button" type="button"
       uib-tooltip="Upload" tooltip-placement="bottom"
       ng-if="!recorder.status.isRecording && audioBlob"
       ng-click="saveRecordedAudio()">
    <i class="material-icons">cloud_upload</i>
  </div>
</div>

<div ng-if="isAudioAvailable && !isUpdatingAudio">
  <div class="oppia-recording-button" type="button"
       ng-click="AudioPlayerService.isPlaying() ? AudioPlayerService.pause() : AudioPlayerService.play()">
    <i class="material-icons"><[AudioPlayerService.isPlaying() ? '&#xE035;' : '&#xE039;']></i>
  </div>
  <div class="oppia-slider-section">
    <div ng-if="isAudioLoading">
      <md-progress-linear md-mode="indeterminate"></md-progress-linear>
    </div>
    <div>
      <md-slider ng-model="track.progress" ng-model-options="{ getterSetter: true }" aria-label="audio-slider">
      </md-slider>
    </div>
  </div>
  <div class="oppia-audio-extra-buttons">
    <div class="oppia-audio-button"
         ng-class="{'oppia-disabled-icon': !canTranslate}"
         uib-tooltip="Record new" tooltip-placement="bottom"
         ng-click="updateAudio()">
      <i class="material-icons">loop</i>
    </div>
    <div class="oppia-audio-button"  type="button"
         uib-tooltip="Delete" tooltip-placement="bottom"
         ng-class="{'oppia-disabled-icon': !canTranslate}"
         ng-click="openDeleteAudioTranslationModal()">
      <i class="material-icons">delete</i>
    </div>
    <div class="oppia-audio-button">
      <div class="dropdown-toggle" type="button"
           ng-class="{'oppia-disabled-icon': !canTranslate}">
        <i class="material-icons">&#xE5D2;</i>
      </div>
      <ul class="dropdown-menu dropdown-menu-right">
        <li ng-click="openAddAudioTranslationModal()"><a href="">Upload audio</a></li>
        <li ng-if="!audioNeedsUpdate" ng-click="toggleAudioNeedsUpdate()"><a href="">Mark need update</a></li>
        <li ng-if="audioNeedsUpdate" ng-click="toggleAudioNeedsUpdate()"><a href="">Unmark need update</a></li>
      </ul>
    </div>
  </div>
</div>


<style>
  .oppia-audio-recording-bar {
    width: 100%;
    height: 100%;
    display: inline-block;
  }
  .oppia-recording-button {
    color: #009688;
    width: 7%;
    float: left;
    padding: 13px;
    border-right: 1px solid;
    border-left: 1px solid;
  }
  .oppia-audio-bar-info {
    float: left;
    width: 79%;
    text-align: center;
    padding: 13px 0px 13px 0px;
    border-right: 1px solid #009688;
  }
  .oppia-disabled-icon {
    cursor: not-allowed;
    pointer-events: none;
    color: #ccc;
  }
  .oppia-audio-button {
    color: #009688;
    float: left;
    border-right: 1px solid;
    padding: 13px;
    width: 7%
  }
  .oppia-audio-visulaizer {
    width: 79%;
    float: left;
    border-left: 1px solid #009688;
    border-right: 2px solid #009688;
  }
  .oppia-mp3-converting {
    text-align: center;
    padding: 13px 0px 13px 0px;
  }
  .oppia-slider-section {
    width: 72%;
    float: left;
    border-left: 1px solid #009688;
    border-right: 2px solid #009688;
  }
  audio-translation-bar md-progress-linear.md-default-theme .md-bar {
    background-color: #009688;
  }

  audio-translation-bar md-slider {
    height: 50px;
  }

  audio-translation-bar md-slider.md-default-theme .md-track-fill {
    background-color: #009688;
  }

  audio-translation-bar md-slider.md-default-theme .md-thumb:after {
    border-color: #009688;
    background-color: #009688;
  }
  canvas {
    background: #EEA;
  }

</style>
